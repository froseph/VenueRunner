{% extends "base.html" %}
{% block title %} Event - {{event.name}}{% endblock %}
{% block content %}

<div id="event">
  <ul>
    <li><a href="#event_info">Info</a></li>
    <li><a href="#event_attendence">Attendence</a></li>
  </ul>

  <div id="event_info">
    <dl>
      <dt> Date </dt>
        <dd> {{ event.date }} </dd>
      <dt> Name </dt>
        <dd> {{ event.name }} </dd>
      <dt> Price </dt>
        <dd> {{ event.price }} </dd>
      <dt> Description </dt>
        <dd> {{ event.description }} </dd>
    </dl>
  </div>

  <div id="event_attendence">
  <!-- todo make custom data source -->
  <table id="customer_list" class="datatable">
    <thead>
      <tr>
        <th> First Name </th>
        <th> Last Name </th>
        <th> E-mail </th>
        <th> Signup Date </th>
        <th> Last Seen Date </th>
        <th> Tags </th>
      </tr>
    </thead>
    <tbody>
    {% for customer in customers %}
      <tr id="{{ "customer_" ~ customer.id }}">
        <td> {{ customer.first_name }} </td>
        <td> {{ customer.last_name }} </td>
        <td> {{ customer.email }} </td>
        <td> {{ customer.signup_date }} </td>
        <td> {{ customer.last_seen_date }} </td>
        <td>
          {% for tag in customer.tags %}
            {{ tag.name }}
            {% if tag.value %} : {{ tag.value }} {% endif %}
            &nbsp
          {% endfor %}
        </td>
      </tr>
    {% endfor %}
    </tbody>
  </table>
  </div>
</div>

<script type="text/javascript">
  $(function() { 
      $('#event').tabs();
      $('#customer_list').dataTable();

      // build ui accordian with this search bar?
      $('#customer_list table tbody tr').click( function() {
        var id = $(this).attr('id').slice(9); 
        // get the attributes/data
        //
      })
  } );
</script>
{% endblock %}
